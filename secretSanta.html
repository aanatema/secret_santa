<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script js>

    //je veux faire une fonction qui prenne en paramètre une liste de personne et retourne un tableau de combinaison aléatoire.
    // Chaque nom devra apparaitre au moins une fois en index 0 et en index 1, mais une combinaison ne devra pas retourner 
    // de combinaison comportant deux fois le même utilisateur.
    // On pourrait faire appel au hasard pour la génération des combinaisons mais ça ne me parait pas efficace.
    // Si j'ai une liste de 50 noms, le programme va mettre du temps avant de trouver les combinaisons répondants à ces critères.

    // Idee n°1 :
    // Je commence par faire un shuffle de mon tableau.
    // Ensuite, je crée une boucle qui attribue à chaque fois l'user index i l'user index i+1  j'ajoute une condition, si index i+1
    // est indefini, alors on attribue index de 0.


    function shuffle(array) {
        let currentIndex = array.length;
        let randomIndex = 0;

        // While there remain elements to shuffle.
        while (currentIndex > 0) {

            // Pick a remaining element.
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;

            // And swap it with the current element.
            let temp = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temp;

            // autre version du swap : [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    function triSecretSanta(array) {
        let combinaisonArray = [];
        array = shuffle(array);
        console.log(array)
        for (let i = 0; i < array.length; i++) {
            if (array[i + 1] != undefined) {
                combinaisonArray.push([array[i] + ", " + array[i + 1]])
            } else {
                combinaisonArray.push([array[i] + ", " + array[0]])
            }
        }
        return combinaisonArray
    }

    function main() {
        let listeInvites = [];
        let nombreInvites= prompt("Combien de personnes souhaitez vous inviter à cet évenement ?"); 
        for(let i = 0; i < parseInt(nombreInvites); i++){
            let mail = prompt("Inscrivez les adresses mails de vos invités : ");
            listeInvites.push(mail);
        }
        return triSecretSanta(listeInvites);  
    }
    console.log(main());

</script>

</html>